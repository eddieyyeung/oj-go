## 题目

[134. Gas Station](https://leetcode.cn/problems/gas-station)

## 题解

按照正常思路来，会从头开始以每一位 $i=x$ 作为起始点进行遍历，按顺序环绕路行驶一周，判断 $gas[i]-cost[i]$ 的累加是否一直大于 0，如果是，则 $x$ 为答案，否则为 -1。但是，由于题目限制的数值范围为 $1 \le n \le 10^5$，该解法时间复杂度为 $O(n^2)$，会超过时间限制。

那么，有没有办法在遍历的过程中排除掉一些不必要的遍历呢？有的。

假设，从加油站 $i=x$ 出发，最后一个不可到达的点为 $y$，则：

$$
\sum_{i=x}^{y}(gas[i]-cost[i]) < 0 \tag1
$$

且在 $[x,y-1]$ 中，$gas[i]-cost[i]$ 的累加始终大于等于 0，即：

$$
\sum_{i=x}^{t, t\in[x, y-1]}(gas[i]-cost[i]) \ge 0 \tag2
$$

那么下一个点的遍历，是不是有必要从 $[x+1, y]$ 中的某个点开始呢？答案是不需要，可以反证法来证明。

我们不妨假设存在某个点 $u$，使得 $\sum_{i=u}^{y}(gas[i]-cost[i]) \ge 0$，由公式(1)得到：

$$
\sum_{i=x}^{u-1}(gas[i]-cost[i]) + \sum_{i=u}^{y}(gas[i]-cost[i]) < 0 \tag3
$$

后者大于等于 0，则需要前者满足 $\sum_{i=x}^{u-1}(gas[i]-cost[i]) < 0$ 才能使得整个表达式成立，但是这跟公式(2) 是矛盾的，所以假设不成立，因此下一个点的遍历，可以从 $y+1$ 开始，这就减少了遍历的次数了

## 复杂度分析

时间复杂度: 遍历过程中已经排除了不可能的情况，可以按照数组的顺序遍历下去，因此时间复杂度为 $O(n)$

空间复杂度: $O(1)$

